"use strict";(()=>{var e={};e.id=998,e.ids=[998],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,o){return o in t?t[o]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,o)):"function"==typeof t&&"default"===o?t:void 0}}})},5448:(e,t,o)=>{o.r(t),o.d(t,{config:()=>d,default:()=>a,routeModule:()=>u});var r={};o.r(r),o.d(r,{default:()=>i});var l=o(1802),n=o(7153),s=o(6249);async function i(e,t){if(t.setHeader("Access-Control-Allow-Credentials","true"),t.setHeader("Access-Control-Allow-Origin",e.headers.origin||"*"),t.setHeader("Access-Control-Allow-Methods","GET,OPTIONS,POST,PUT,DELETE"),t.setHeader("Access-Control-Allow-Headers","X-CSRF-Token,X-Requested-With,Accept,Accept-Version,Content-Length,Content-MD5,Content-Type,Date,X-Api-Version"),"OPTIONS"===e.method){t.status(200).end();return}try{if(global.vercelFlows||(global.vercelFlows=[]),"GET"===e.method)t.json(global.vercelFlows);else if("POST"===e.method){let{name:r,definition:l}=e.body;if(!r||!l)return t.status(400).json({error:"Name and definition required"});let n={id:o(4770).randomBytes(4).toString("hex"),name:r,definition:l,createdAt:new Date().toISOString(),custom:!0};global.vercelFlows.push(n),t.json({success:!0,flow:{id:n.id,name:n.name,createdAt:n.createdAt}})}else if("PUT"===e.method){let{id:o,name:r,definition:l}=e.body;if(!o)return t.status(400).json({error:"ID required"});let n=global.vercelFlows.findIndex(e=>e.id===o);if(-1===n)return t.status(404).json({error:"Flow not found"});r&&(global.vercelFlows[n].name=r),l&&(global.vercelFlows[n].definition=l),global.vercelFlows[n].updatedAt=new Date().toISOString(),t.json({success:!0,flow:global.vercelFlows[n]})}else if("DELETE"===e.method){let{id:o}=e.query;if(!o)return t.status(400).json({error:"ID required"});global.vercelFlows=global.vercelFlows.filter(e=>e.id!==o),t.json({success:!0,message:"Flow deleted"})}else t.status(405).json({error:"Method not allowed"})}catch(e){t.status(500).json({error:e.message})}}let a=(0,s.l)(r,"default"),d=(0,s.l)(r,"config"),u=new l.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/flows",pathname:"/api/flows",bundlePath:"",filename:""},userland:r})},7153:(e,t)=>{var o;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return o}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(o||(o={}))},1802:(e,t,o)=>{e.exports=o(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var o=t(t.s=5448);module.exports=o})();